# 메트릭 데이터 분석 프로그램 사용 가이드

## 개요

이 프로그램은 시스템 및 거래소 메트릭 데이터를 분석하고 시각화하여 성능 보고서를 생성합니다. 
제공된 JSON 형식의 메트릭 데이터를 로드하여 다음과 같은 분석을 수행합니다:

1. 시스템 리소스 사용량 분석 (CPU, 메모리, 디스크, 네트워크)
2. 각 거래소별 성능 지표 분석 (메시지 처리율, 처리 시간, 오류 등)
3. 거래소 간 성능 비교
4. 통계 요약 보고서 생성

## 설치 방법

1. 필요한 패키지 설치:

```bash
pip install -r src/requirements_metric_analyzer.txt
```

## 사용 방법

### 기본 사용법

```bash
python src/metric_analyzer.py
```

이 명령은 기본 설정으로 프로그램을 실행하여 `src/logs/metrics` 디렉토리에서 모든 메트릭 파일을 로드하고, 
`reports` 디렉토리에 분석 결과를 저장합니다.

### 명령행 인자

프로그램은 다음과 같은 명령행 인자를 지원합니다:

* `--log-dir` : 메트릭 로그 파일이 저장된 디렉토리 경로 (기본값: "src/logs/metrics")
* `--date` : 분석할 특정 날짜 (YYYYMMDD 형식)
* `--output-dir` : 보고서 저장 디렉토리 (기본값: "reports")
* `--exchange` : 분석할 특정 거래소 이름

### 예제

1. 특정 날짜의 데이터만 분석:

```bash
python src/metric_analyzer.py --date 20250308
```

2. 특정 거래소만 분석:

```bash
python src/metric_analyzer.py --exchange binance
```

3. 출력 디렉토리 지정:

```bash
python src/metric_analyzer.py --output-dir ./analysis_results
```

## 분석 결과

분석 결과는 다음과 같이 생성됩니다:

1. **시스템 리소스 분석**
   - `system_resource_usage.html`: CPU, 메모리, 디스크 사용률 그래프
   - `network_traffic.html`: 네트워크 트래픽 그래프
   - `system_stats_report.json`: 시스템 통계 요약 (JSON 형식)

2. **거래소별 분석** (각 거래소마다 별도 디렉토리)
   - `performance_metrics.html`: 메시지 처리율 및 처리 시간 그래프
   - `error_metrics.html`: 오류 및 재연결 횟수 그래프
   - `exchange_stats_report.json`: 거래소 통계 요약 (JSON 형식)

3. **거래소 간 비교**
   - `exchange_comparison_message_rate.html`: 메시지 처리율 비교
   - `exchange_comparison_orderbook_rate.html`: 호가창 업데이트율 비교
   - `exchange_comparison_avg_processing_time.html`: 평균 처리 시간 비교
   - `exchange_comparison_latency_ms.html`: 지연 시간 비교

4. **종합 보고서**
   - `index.html`: 모든 보고서에 대한 링크가 있는 메인 페이지

## 프로그램 구조

- `MetricAnalyzer` 클래스: 메트릭 데이터 분석 기능 제공
  - `load_data()`: 메트릭 데이터 파일 로드
  - `analyze_system_metrics()`: 시스템 리소스 분석
  - `analyze_exchange_metrics()`: 거래소 성능 분석
  - `compare_exchanges()`: 거래소 간 성능 비교
  - `generate_performance_report()`: 종합 성능 보고서 생성

## 참고 사항

- 모든 그래프는 HTML 형식으로 저장되어 브라우저에서 확인할 수 있습니다.
- 통계 요약은 JSON 형식으로 저장되어 다른 시스템에서도 활용할 수 있습니다.
- 분석 결과를 바로 확인하려면 `index.html` 파일을 브라우저로 열어보세요. 